<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
#div{width:50px;height:50px;background:#F00;position:relative;left:0px;top:0px}
</style>
<script>
window.onload=function(){
	var oBtn=document.getElementById('btn');
	var oDiv=document.getElementById('div');
	oBtn.onclick=function(){
		doMove(oDiv,'width',4,500,function(){
			doMove(oDiv,'height',5,500)
			})
		}
  function doMove(obj,attr,dir,target,endFn){
	  dir=parseInt(getStyle(obj,attr))<target?dir:-dir
	  clearInterval(obj.timer)
	  obj.timer=setInterval(function(){
	  var speed=parseInt(getStyle(obj,attr));
	  if(speed>target&&dir>0||speed<target&&dir<0)speed=target;
	  obj.style[attr]=speed+dir+'px';
	  if(speed==target){
		  clearInterval(obj.timer);
		  endFn&&endFn();}
	  },16);		
	}
	}
	function getStyle(obj,arr){
	return obj.currentStyle?obj.currentStyle[arr]:getComputedStyle(obj)[arr];
	}
</script>
</head>

<body>
<input type="button" value="按钮" id="btn" />
<div id="div"></div>
</body>
</html>
