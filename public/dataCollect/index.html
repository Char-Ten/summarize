<!doctype html>
<html>

<head>
    <meta charset='utf-8' />
    <link rel="stylesheet" href="//cdn.bootcss.com/element-ui/1.4.2/theme-default/index.css">
    <link href="../commo.css" rel="stylesheet">
    <link href="./css/index.css" rel="stylesheet">
</head>

<body>
    <div id="deviceList" class="cell device-list">
        <el-alert v-if="deviceList.length===0" title="主机列表为空" description="可能资源不存在或网络出现了问题" type="warning" show-icon :closable="false"></el-alert>
        <device-item v-for="item,index in deviceList" :key="index" :en="item.en" :site="item.site" />
    </div>

    <!--设备列表-->
    <script id="deviceItemTpl" type="text/x-template">
        <section class="device-item">
            <h2 class="device-name" v-text="'主机：'+en"></h2>
            <header class="cell item-hd">
                <div>
                    <div class="device-btngroup">
                        <el-button type="primary" size="small" icon="share" @click="eventSearchLinkStatus">连接状态</el-button>
                        <el-button type="primary" size="small" icon="time" :disabled="false" @click="eventSearchRealTimeData">实时数据</el-button>
                        <el-button type="primary" size="small" icon="search" @click="eventSearchNowData">最新数据</el-button>
                    </div>
                </div>
                <aside>
                    <transition name="el-fade-in-linear">
                        <el-button type="text" icon="caret-top" v-show="isShowTable" @click="isShowTable=false">收起连接状态</el-button>
                    </transition>
                    <transition name="el-fade-in-linear">
                        <el-button type="text" icon="caret-top" v-show="!Array.isArray(nowDataList)" @click="nowDataList=[]">收起最新数据</el-button>
                    </transition>
                    <transition name="el-fade-in-linear">
                        <el-button type="text" icon="caret-top" v-show="isShowCharts2" @click="eventSearchRealTimeDataEnd">收起实时数据</el-button>
                    </transition>
                </aside>
            </header>
            <transition name="el-fade-in-linear">
                <div class="table" v-if="isShowTable">
                    <component is="device-table-1" :linkStatusData="linkStausList"></component>
                </div>
            </transition>
            <transition name="el-fade-in-linear">
                <div class="echart-box" v-show="!Array.isArray(nowDataList)">
                    <div class="echart" ref="echarts"></div>
                </div>
            </transition>
            <transition name="el-fade-in-linear">
                <div v-show="isShowCharts2">
                    <div class="cell progress">
                        <el-progress type="circle" :percentage="((120-finalTimes)*100/120).toFixed(2)"></el-progress>
                        <div class="progress-rt">
                            <p>数据采集中，已经采集了{{count}}次。</p>
                        </div>
                    </div>
                    <div class="echart" ref="echarts2"></div>
                </div>
            </transition>
        </section>
    </script>

    <script id="deviceTable1Tpl" type="text/x-template">
        <el-table :data="linkStatusData" border>
            <el-table-column prop="ch" label="#" width="60"></el-table-column>
            <el-table-column prop="en" label="主机名"></el-table-column>
            <el-table-column prop="status" label="状态" width="120">
                <template scope="scope">
                    <span v-text="scope.row.status?'连接':'未连接'"></span>
                </template>
            </el-table-column>
        </el-table>
    </script>

    <script src="//cdn.bootcss.com/echarts/3.6.2/echarts.min.js"></script>
    <script src="//cdn.bootcss.com/vue/2.3.4/vue.min.js"></script>
    <script src="//cdn.bootcss.com/axios/0.16.2/axios.min.js"></script>
    <script src="//unpkg.com/element-ui/lib/index.js"></script>
    <script src='./js/index.js'></script>
</body>

</html>